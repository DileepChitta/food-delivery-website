<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Checkout</title>
  Bootstrap CSS
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script type="text/javascript"
        src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js">
</script>
<script type="text/javascript">
   (function(){
      emailjs.init({
        publicKey: "mhJl9Aax9AT6wllFF",
      });
   })();
</script>
</head>
<body style="background-color: rgb(70, 70, 222);">
  <!-- Navbar include (if you created navbar.ejs partial) -->
  <!-- <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: rgb(0, 0, 50)">
    <div class="container">
      <a class="navbar-brand fw-bold" href="/">FoodieApp</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link" href="/home">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/menu">Menu</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/cart">Cart</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="/checkout">Checkout</a>
          </li>
        </ul>
      </div>
    </div>
  </nav> -->

  <!-- Checkout Section -->
  <!-- <div class="container mt-5" >
    <h2 class="fw-bold text-center mb-4">Checkout üßæ</h2>

     -->
      <!-- Left column: Checkout Form -->
      <!-- <div class="col-md-7" style="margin-left: 220px;">
        <div class="card shadow-md bg-danger p-4 p-5" style="border-radius: 30px;">
          <h5 class="mb-3">Billing & Delivery Details</h5>
          <form action="/checkout" method="POST" onsubmit="sendMail(event)" id="checkoutForm">
            
            <div class="mb-3">
              <label class="form-label">Full Name</label>
              <input type="text" class="form-control" name="fullName" placeholder="Enter your name" required />
            </div>
            <div class="mb-3">
              <label class="form-label">Address</label>
              <textarea class="form-control" name="address" rows="3" placeholder="Enter your delivery address" required></textarea>
            </div>
            <div class="mb-3">
              <label class="form-label">Payment Method</label>
              <select class="form-select" name="paymentMethod" required>
                <option>Credit Card</option>
                <option>Debit Card</option>
                <option>Cash on Delivery</option>
              </select>
            </div>
            <button type="submit" class="btn bg-primary w-100">Place Order</button>
          </form>
      </div> -->

      <!-- Right column: Order Summary  -->
      <!-- <div class="col-md-5">
        <div class="card shadow-sm p-4">
          <h5 class="mb-3">Order Summary</h5>
          <ul class="list-group mb-3">
            <li class="list-group-item d-flex justify-content-between">
              <span>Burger üçî</span>
              <span>‚Çπ150</span>
            </li>
            <li class="list-group-item d-flex justify-content-between">
              <span>Pizza üçï</span>
              <span>‚Çπ300</span>
            </li>
            <li class="list-group-item d-flex justify-content-between fw-bold">
              <span>Total</span>
              <span>‚Çπ450</span>
            </li>
          </ul>
          <p class="text-muted small">*Delivery charges included</p>
        </div>
      </div>
    </div>
  </div> -->

  <!-- Footer
  <footer class="text-center mt-5 mb-3 text-muted">
    <p>&copy; <%= new Date().getFullYear() %> FoodieApp. All Rights Reserved.</p>
  </footer>


  <script>
function sendMail(event){
  event.preventDefault(); // stop default submit

  let params = {
    name: document.getElementById("fullname").value,
    address: document.getElementById("address").value,
    message: document.getElementById("paymentmethod").value,
  };

  emailjs.send("service_gniydft", "template_q2tt1af", params)
    .then(() => {
      alert("Order placed successfully!");
      // now submit the form to backend
      document.getElementById("checkoutForm").submit();
    })
    .catch((err) => {
      console.error(err);
      alert("Failed to send order. Try again.");
    });
}
</script>
  Bootstrap JS
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Checkout</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script type="text/javascript">
    (function(){
      emailjs.init({
        publicKey: "mhJl9Aax9AT6wllFF",
      });
    })();
  </script>
</head>
<body style="background-color: rgb(70, 70, 222);">

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: rgb(0, 0, 50)">
    <div class="container">
      <a class="navbar-brand fw-bold" href="/">FoodieApp</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="/home">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="/menu">Menu</a></li>
          <li class="nav-item"><a class="nav-link" href="/cart">Cart</a></li>
          <li class="nav-item"><a class="nav-link active" href="/checkout">Checkout</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Checkout Section -->
  <div class="container mt-5">
    <h2 class="fw-bold text-center mb-4">Checkout üßæ</h2>

    <div class="col-md-7 mx-auto">
      <div class="card shadow-md bg-danger p-5" style="border-radius: 30px;">
        <h5 class="mb-3">Billing & Delivery Details</h5>
        
        <!-- ‚úÖ Form -->
        <form id="checkoutForm" action="/checkout" method="POST" onsubmit="sendMail(event)">
          <div class="mb-3">
            <label class="form-label">Full Name</label>
            <input type="text" id="fullname" name="fullName" class="form-control" placeholder="Enter your name" required />
          </div>
          <div class="mb-3">
            <label class="form-label">Email</label>
            <input type="email" id="email" name="email" class="form-control" placeholder="Enter your email" required />
          </div>
          <div class="mb-3">
            <label class="form-label">Address</label>
            <textarea id="address" name="address" class="form-control" rows="3" placeholder="Enter your delivery address" required></textarea>
          </div>
          <div class="mb-3">
            <label class="form-label">Payment Method</label>
            <select id="paymentmethod" name="paymentMethod" class="form-select" required>
              <option>Credit Card</option>
              <option>Debit Card</option>
              <option>Cash on Delivery</option>
            </select>
          </div>
          <button type="submit" class="btn bg-primary w-100">Place Order</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="text-center mt-5 mb-3 text-muted">
    <p>&copy; <%= new Date().getFullYear() %> FoodieApp. All Rights Reserved.</p>
  </footer>

  <!-- ‚úÖ EmailJS + Submit -->
  <script>
    function sendMail(event){
      event.preventDefault(); // stop form from instantly submitting

      let params = {
        name: document.getElementById("fullname").value,
        email:document.getElementById('email').value,
        address: document.getElementById("address").value,
        message: document.getElementById("paymentmethod").value,
      };

      emailjs.send("service_gniydft", "template_q2tt1af", params)
        .then(() => {
          alert("‚úÖ Order placed successfully! Confirmation email sent.");
          // now submit the form to backend
          document.getElementById("checkoutForm").submit();
        })
        .catch((err) => {
          console.error(err);
          alert("‚ùå Failed to send confirmation email, but your order will still be submitted.");
          // even if email fails, still submit order
          document.getElementById("checkoutForm").submit();
        });
    }
  </script>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
